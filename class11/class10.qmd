---
title: "צירופים + מקורות מידע"
author: 'ד"ר עדו קליין'
date: 03/18/2024
format:
  revealjs:
    rtl: true
    css: "style.css"
    slide-number: true
    show-slide-number: all
editor: visual
---

```{ojs}
//| echo: false
now = new Date
```

## תזכורת לשיעור הקודם

-   למדנו איך לבצע מניפולציות מרחביות

## בשיעור היום

-   נבין מהו צירוף וכיצד מבצעים אותו

-   נלמד על מקורות מידע גאוגרפיים בישראל ובעולם

## על צירוף טבלאי - השלמה

בשיעור הקודם למדנו כיצד מבצעים צירוף מרחבי בין שתי שכבות.\
עם זאת, חלק מהיחסים לא הוגדרו כמו שצריך. לכן כעת נעמיק בנושא זה

## צירוף טבלאי - יחסים

צירופים טבלאיים מתייחסים לאופן שבו טבלאות נתונים משויכות זו לזו בבסיסי נתונים או במסגרת ניתוח נתונים:

1.  אחד לאחד (1:1): לכל שורה בטבלה הראשונה יש שורה אחת מתאימה בטבלה השנייה ולהפך. דוגמה: טבלת משתמשים וטבלת פרופילים, כאשר לכל משתמש יש פרופיל יחיד.

2.  אחד לרבים (1:N): לכל שורה בטבלה הראשונה יכולות להיות מספר שורות מתאימות בטבלה השנייה, אך לכל שורה בטבלה השנייה יש שורה אחת מתאימה בטבלה הראשונה. דוגמה: טבלת משתמשים וטבלת הזמנות, כאשר משתמש אחד יכול לבצע מספר הזמנות.

------------------------------------------------------------------------

3.  רבים לרבים (M:N): לכל שורה בטבלה הראשונה יכולות להיות מספר התאמות בטבלה השנייה ולהפך. קשר כזה מתבצע בדרך כלל דרך טבלת קשרים (junction table). דוגמה: טבלת סטודנטים וטבלת קורסים, כאשר סטודנט יכול להירשם למספר קורסים וכל קורס כולל מספר סטודנטים.

השימוש בכל סוג קשר תלוי במבנה הנתונים ובקשרים הלוגיים בין הישויות המיוצגות בטבלאות.

## דוגמאות

### **אחד לאחד (1:1)**

#### טבלת משתמשים:

| UserID | Name  |
|--------|-------|
| 1      | Alice |
| 2      | Bob   |

#### טבלת פרופילים:

| ProfileID | UserID | Email            |
|-----------|--------|------------------|
| 1         | 1      | alice\@email.com |
| 2         | 2      | bob\@email.com   |

------------------------------------------------------------------------

#### טבלה מקושרת (Join):

| UserID | Name  | ProfileID | Email            |
|--------|-------|-----------|------------------|
| 1      | Alice | 1         | alice\@email.com |
| 2      | Bob   | 2         | bob\@email.com   |

------------------------------------------------------------------------

### **אחד לרבים (1:N)**

#### טבלת משתמשים:

| UserID | Name  |
|--------|-------|
| 1      | Alice |
| 2      | Bob   |

#### טבלת הזמנות:

| OrderID | UserID | OrderDate  |
|---------|--------|------------|
| 101     | 1      | 2025-01-01 |
| 102     | 1      | 2025-01-05 |
| 103     | 2      | 2025-01-03 |

------------------------------------------------------------------------

#### טבלה מקושרת (Join):

| UserID | Name  | OrderID | OrderDate  |
|--------|-------|---------|------------|
| 1      | Alice | 101     | 2025-01-01 |
| 1      | Alice | 102     | 2025-01-05 |
| 2      | Bob   | 103     | 2025-01-03 |

------------------------------------------------------------------------

### **רבים לרבים (M:N)**

#### טבלת סטודנטים:

| StudentID | Name  |
|-----------|-------|
| 1         | Alice |
| 2         | Bob   |

#### טבלת קורסים:

| CourseID | CourseName       |
|----------|------------------|
| 101      | Mathematics      |
| 102      | Computer Science |

------------------------------------------------------------------------

#### טבלת קשרים (רישום לקורסים):

| StudentID | CourseID |
|-----------|----------|
| 1         | 101      |
| 1         | 102      |
| 2         | 101      |

------------------------------------------------------------------------

#### טבלה מקושרת (Join):

| StudentID | Name  | CourseID | CourseName       |
|-----------|-------|----------|------------------|
| 1         | Alice | 101      | Mathematics      |
| 1         | Alice | 102      | Computer Science |
| 2         | Bob   | 101      | Mathematics      |

------------------------------------------------------------------------

## צפייני GIS עירוניים/ארגוניים

אתרים ארגוניים מכילים בחלק גדול מאוד מהמקרים צפייני gis במידע הארגוני המונגש ככזה.

לא כל הארגונים מנגישים את המידע.

לא כל הארגונים מאפשרים את הורדת המידע.

לא כל הארגונים מאפשרים גישה ישירה למידע.

אבל יש כאלה שכן מאפשרים גישה כזו.

------------------------------------------------------------------------

במקרים רבים עיריות מנגישות את המידע דרך service גאוגרפי, לרוב של esri

![](images/paste-4.png)

## מערכות ארגוניות

## טעינת שכבות מתוך סרויס

נקבל כתובת של סרויס (כרגע לא נלמד כיצד להשיג אותה בכוחות עצמנו. לפרטים נוספים [כאן](https://idshklein.github.io/amav_qgis/lesson_5/qgis5.html#(4)))

למשל, שכבות עיריית ירושלים:

<https://gisviewer.jerusalem.muni.il/arcgis/rest/services/>

## openstreetmap

כבר דיברנו עליו במהלך הקורס מספר פעמים. ניתן להוריד מידע באמצעות התוכנה ישירות ממנו באמצעות תוסף quickosm. לא נרחיב בנושא כאן אלא רק בהדגמה בשיעור.

## דאטה גוב

## רסטר

## למה רסטר?

כי לפעמים מידע וקטורי לא מתאים לשמירה או עיבוד זריז של נתונים.

## הבדלים מהותיים בין רסטר ווקטור

רסטר - שמירת הנתונים בצורה של טבלה עם ערך אחד, בניגוד לקובץ וקטורים המכיל ישויות גאוגרפיות שונות באמצעות מערך נקודות, שיכול לקבל ערכים רבים.

ברסטר - כל ריבוע הוא ישות, למעשה, אבל כל ישות זהה לחברותיה מבחינת מימדים.

## טעינת שכבות רסטריות

שכבות רסטריות יגיעו בקבצים בסיומות שונות. tif היא סיומת יחסית רגילה עבור קבצים רסטרים. עם זאת - ניתן לשמור רסטר בתוך GPKG, ועל כך בהמשך.

שכבה רסטרית לדוגמא קיימת באתר הקורס.

## עיגון רסטר בתאוריה

בעיגון רסטר, הכוונה היא לקיחת תמונה/מפה שקיימת בתמונה ולעגן אותה בצורה דיגטלית למרחב, כך שיהיה ניתן לצפות בה יחד עם נתונים וקטוריים באותה התמונה, ולערוך חישובים המפיקים תוצאה מרחבית ברורה.

על מנת לעגן רסטר, יש צורך בבחירה של לפחות 3 נקודות על גבי התמונה

## עיגון רסטר בפועל

![](images/paste-1.png)

הכניסה למעגן הרסטרים (georefrencer) היא דרך תפריט השכבה.

------------------------------------------------------------------------

כך נראה חלון העיגון.

![](images/paste-2.png)

------------------------------------------------------------------------

![](images/paste-3.png)

הכפתור החשוב בהקשר זה - הוספת רסטר

## בחירת נקודות עיגון

![](images/paste-5.png)

------------------------------------------------------------------------

הוספת נקודות עיגון - בין אם על ידי כתיבה ובין אם על ידי בחירה מהמפה.

![](images/paste-6.png)

## תוצאה זמנית

![](images/paste-7.png)

## שקיפות/בלנד מוד

בשביל לראות מה יש מתחת למפה - צריך או להשקיף את התמונה - properties -\> transparency -\> סליידר עליון.

אפשר גם להשקיף באמצעות בלנד מוד - תפריט הסימבולוגיה - ![](images/paste-8.png)

------------------------------------------------------------------------

![](images/paste-9.png){width="363"}

דברים שמגלים באמצעות מיפוי כזה - רחוב ירמיהו בירושלים היה פעם בכלל במקום אחר.

![](images/paste-10.png){width="363"}

## שמירת שכבה רסטרית בgpkg

דומה מאוד לשמירה של שכבה וקטורית:

לחיצה ימנית

export

save as

ובחירה בפורמט של gpkg.

גם שם יש צורך בהגדרת שם השכבה.

::: content-hidden
## תרגיל 9

1.  הורידו מפה של ירושלים מ[אוסף המפות על שם ערן לאור](https://merhav.nli.org.il/primo-explore/search?query=any,contains,%D7%99%D7%A8%D7%95%D7%A9%D7%9C%D7%99%D7%9D%20MAP&sortby=lso01&vid=NLI&facet=searchcreationdate,include,1922%7C,%7C1948&mfacet=tlevel,include,online_resources,1&mfacet=topic,include,Jerusalem%20(Israel),1&mfacet=creator,include,Survey%20of%20Palestine,2&mfacet=creator,include,Great%20Britain%20Ordnance%20Survey,2&mfacet=creator,include,Egypt%20Ma%E1%B9%A3la%E1%B8%A5at%20al-Mis%C4%81%E1%B8%A5ah,2&mfacet=creator,include,Great%20Britain%20War%20Office%20General%20Staff%20Geographical%20Section,2&mfacet=rtype,include,Map,3&lang=iw_IL&offset=0&came_from=sort&_gl=1*1vqiiuv*_ga*MTEzMDU0NTE1LjE2ODc0NjMzMjM.*_ga_8P5PPG5E6Z*MTcxMDY2NDc4OS40Ni4xLjE3MTA2NjUyNDIuNDIuMC4w*_ga_4207HLQSXF*MTcxMDY2NDc4OS40Ni4xLjE3MTA2NjUyNDIuNDIuMC4w*_ga_8PQRSYT854*MTcxMDY2NDc4OS40Ni4xLjE3MTA2NjUyNDIuNDIuMC4w)
2.  עגנו אותה באמצעות הגאורפרנסר
3.  התחברו ל[סרויס של עיריית ירושלים](https://gisviewer.jerusalem.muni.il/arcgis/rest/services/)
4.  הוסיפו את שכבת האנדרטאות
5.  שמרו בפרויקט שבתוך gpkg את השכבה של המפה כשכבה רסטרית,
6.  שמרו את סדר השכבות בפרויקט, כך ששכבת האנדרטאות נשאבת ישירות
:::

## סיכום הקורס - למדנו על:

-   מהו מידע מרחבי

-   מהן מערכות קואורדינטות

-   מהי סימבולוגיה

-   כיצד ממפים

-   כיצד בוחרים מידע בשכבות

-   כיצד עורכים שכבות ומייצרים שכבות חדשות

-   כיצד מפעילים מניפולציות מרחביות

-   כיצד שואבים מידע מרחבי

-   כיצד מעגנים רסטר

## תרגיל מסכם - עבודת חקר על מידע מרחבי

התמיינו לקבוצות של עד 3 אנשים.

בחרו נושא למיפוי מרחבי, למשל -

-   בחינה של השוני בין שכונות בחיפה

-   השוואה היסטורית של מבנים בשכונת רחביה בירושלים

או נושא שיאושר על ידי בפגישתנו.

אנא התחלקו לקבוצות עד ה25.3, שלחו לי מייל הכולל את חברי הקבוצה.

כל קבוצה תיקבע איתי פגישה לאישור הנושא ולבירור נוסף ככל שנצטרך

------------------------------------------------------------------------

יצרו פרויקט בqgis, בתוך קובץ gpkg המכיל את כלל האלמנטים הבאים:

רשימת שכבות וסידורה

לפחות 3 תמות של מפה

לפחות מניפולציה מרחבית אחת או שכבה מקודדת ידנית

לפחות 5 מפות שונות המתארות את התופעה הנחקרת

לפחות 2 סימניות מרחביות

יש להגיש את העבודה המסכמת עד ה21.4.24.

## סקר שביעות רצון

ביקשו ממני לתזכר. מתזכר. לא על חשבון השיעור.